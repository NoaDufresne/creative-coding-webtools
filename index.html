<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sketch</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Jost:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
</head>

<body>
  <div class="container">
    <div class="canvas-container"></div>
    <div class="sidebar-resizer" aria-hidden="true"></div>

    <aside id="sidebar" class="sidebar" role="region" aria-label="Controls">
      <div class="sidebar-inner">
        <header class="sidebar-header">
          <div class="header-row">
            <h1 class="sidebar-title">Flowform</h1>
            <button id="sidebarSideBtn" class="sidebar-side-btn" aria-label="Toggle sidebar side">
              <img id="sidebarSideIcon" src="images/sidebar-right.svg" alt="toggle sidebar" />
            </button>
          </div>
        </header>
        <div class="divider"></div>


        <section class="sidebar-section" id="flowfield-section">
          <div class="section-title">Flow field</div>
          <div class="section-content">
            <div class="setting-control">
              <div class="setting-title">
                <span>Line density</span>
                <span class="value-display" id="lineDensity-value">0.20</span>
              </div>
              <div class="slider-wrapper" data-input="lineDensity">
                <div class="slider-track"></div>
                <div class="slider-handle" id="lineDensity-handle"></div>
                <input id="lineDensity" class="slider" type="range" min="0.02" max="0.45" step="0.01" value="0.4">
              </div>
            </div>

            <div class="setting-control">
              <div class="setting-title">
                <span>Flow scale<button class="help-icon" data-help="flow-scale">?</button></span>
                <span class="value-display" id="flowScale-value">0.03</span>
              </div>
              <div class="slider-wrapper" data-input="flowScale">
                <div class="slider-track"></div>
                <div class="slider-handle" id="flowScale-handle"></div>
                <input id="flowScale" class="slider" type="range" min="0.006" max="0.06" step="0.001" value="0.03">
              </div>
            </div>

            <div class="setting-control">
              <div class="setting-title">
                <span>Steps<button class="help-icon" data-help="steps">?</button></span>
                <span class="value-display" id="numSteps-value">1000</span>
              </div>
              <div class="slider-wrapper" data-input="numSteps">
                <div class="slider-track"></div>
                <div class="slider-handle" id="numSteps-handle"></div>
                <input id="numSteps" class="slider" type="range" min="500" max="4000" step="100" value="1000">
              </div>
            </div>

            <label class="toggle-row">
              <input id="discontinuityToggle" type="checkbox"> Discontinuity
            </label>

            <label class="toggle-row">
              <input id="showFlowLines" type="checkbox"> Flow lines
            </label>

            <label class="toggle-row">
              <input id="bgWhite" type="checkbox" checked> Light
            </label>

            <label class="toggle-row">
              <input id="bgBlack" type="checkbox"> Dark
            </label>
          </div>
        </section>

        <div class="section-divider"></div>

        <section class="sidebar-section" id="colors-section">
          <div class="section-title">Colors</div>

          <div class="section-content">
            <div class="setting-control">
              <div class="setting-title">Density</div>
              <div class="slider-wrapper" data-input="ribbonDensity">
                <div class="slider-track"></div>
                <div class="slider-handle" id="ribbonDensity-handle"></div>
                <input id="ribbonDensity" class="slider" type="range" min="0.01" max="1" step="0.01" value="0.12">
              </div>
            </div>

            <div class="setting-control">
              <div class="setting-title">
                <span>Opacity</span>
                <span class="value-display" id="ribbonOpacity-value">50</span>
              </div>
              <div class="slider-wrapper" data-input="ribbonOpacity">
                <div class="slider-track"></div>
                <div class="slider-handle" id="ribbonOpacity-handle"></div>
                <input id="ribbonOpacity" class="slider" type="range" min="0" max="100" step="1" value="50">
              </div>
            </div>

            <div class="setting-control">
              <div class="setting-title">Colors</div>
              <div class="color-picker-group">
                <div class="color-preview"><input id="col0" type="color" value="#2b1a8b"></div>
                <div class="color-preview"><input id="col1" type="color" value="#962dff"></div>
                <div class="color-preview"><input id="col2" type="color" value="#f175ff"></div>
              </div>
              <button id="randomizeColors" class="btn-text">Randomize</button>
            </div>
          </div>
        </section>

        <div class="section-divider"></div>

        <section class="sidebar-section" id="pixelsort-section">
          <div class="section-title">Pixel Sort</div>
          <div class="section-content" id="pixel-sort-settings">
            <div class="setting-control">
              <div class="setting-title">
                <span>Threshold<button class="help-icon" data-help="threshold">?</button></span>
                <span class="value-display" id="pixelSortThreshold-value">50</span>
              </div>
              <div class="slider-wrapper" data-input="pixelSortThreshold">
                <div class="slider-track"></div>
                <div class="slider-handle" id="pixelSortThreshold-handle"></div>
                <input id="pixelSortThreshold" class="slider" type="range" min="0" max="200" step="1" value="50">
              </div>
            </div>

            <div class="setting-title">
              <span>Direction</span>
              <select id="pixelSortAxis">
                <option value="horizontal">Colonnes (horizontal)</option>
                <option value="vertical">Lignes (vertical)</option>
              </select>
            </div>
          </div>
        </section>

        <div class="section-divider"></div>

        <div class="sidebar-footer">
          <button id="regenBtn" class="btn-secondary">Regenerate</button>
        </div>

        <div class="section-divider"></div>

        <div class="sidebar-footer">
          <label class="transparent-checkbox">
            <input id="transparentExport" type="checkbox"> Transparent background
          </label>

          <button id="exportBtn" class="btn-primary">Export PNG <div class="export-shortcut" id="exportShortcut">cmd + S</div></button>
        </div>
        <div class="sidebar-footer sidebar-footer--about">
          <div id="aboutLink" class="about-link" tabindex="0">_ABOUT</div>
        </div>
      </div>
    </aside>
  </div>

  <div id="infoModal" class="info-modal">
    <div class="info-modal-content">
      <button class="info-modal-close" aria-label="Close">&times;</button>
      <h2>Flowform</h2>
      <p>Flowform is an experimental creative coding project exploring flow fields and generative line structures.
Built with the p5.js library, the tool uses Perlin noise and color systems to produce structured yet organic visual compositions.</p>
      
      <h3>How to use</h3>
      <p>Adjust the settings in the sidebar to customize your flow field. Use the Regenerate button to create a new random pattern, or Export to save your creation as PNG.</p>
      
      <h3>Tips</h3>
      <ul style="margin: 12px 0; padding-left: 20px; line-height: 1.8; opacity: 0.85;">
        <li>Higher Flow Scale = more chaotic patterns</li>
        <li>Higher Line Density = denser, more complex fields</li>
        <li>Use the Pixel Sort for glitch-art effects</li>
        <li>Use transparent background export for layering</li>
        <li>Customize using you favorite colors :D</li>

      </ul>

      <div class="info-modal-credits" style="margin-top:18px; border-top:1px solid rgba(255,255,255,0.06); padding-top:12px;">
        <p style="margin:0 0 6px;">Created by <strong>Noa Dufresne</strong></p>
        <p style="margin:0 0 6px;"><a href="https://github.com/NoaDufresne" target="_blank" rel="noopener" style="color: #9ecbff;">https://github.com/NoaDufresne</a></p>
      </div>
    </div>
  </div>

  <div id="settingModal" class="info-modal">
    <div class="info-modal-content">
      <button class="info-modal-close" aria-label="Close">&times;</button>
      <h2 id="settingModalTitle">Setting</h2>
      <p id="settingModalDescription"></p>
    </div>
  </div>

  <script src="sketch.js"></script>
  <script src="controls.js"></script>
</body>

</html>