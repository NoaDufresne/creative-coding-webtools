<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sketch</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Jost:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" type="text/css" href="style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
</head>

<body>
  <div class="container">
    <div class="canvas-container"></div>

    <aside id="sidebar" class="sidebar" role="region" aria-label="Controls">
      <div class="sidebar-inner">
        <header class="sidebar-header">
          <h1 class="sidebar-title">Flow field generator</h1>
          <div class="divider"></div>
        </header>

        <section class="sidebar-section" id="flowfield-section">
          <div class="section-title">Flowfield</div>
          <div class="section-content">
            <div class="setting-control">
              <div class="setting-title">Line density</div>
              <div class="slider-wrapper" data-input="lineDensity">
                <div class="slider-track"></div>
                <div class="slider-handle" id="lineDensity-handle"></div>
                <input id="lineDensity" class="slider" type="range" min="0.02" max="0.6" step="0.01" value="0.4">
              </div>
            </div>

            <div class="setting-control">
              <div class="setting-title">Flow scale</div>
              <div class="slider-wrapper" data-input="flowScale">
                <div class="slider-track"></div>
                <div class="slider-handle" id="flowScale-handle"></div>
                <input id="flowScale" class="slider" type="range" min="0.006" max="0.06" step="0.001" value="0.03">
              </div>
            </div>

            <div class="setting-control">
              <div class="setting-title">Steps</div>
              <div class="slider-wrapper" data-input="numSteps">
                <div class="slider-track"></div>
                <div class="slider-handle" id="numSteps-handle"></div>
                <input id="numSteps" class="slider" type="range" min="500" max="5000" step="100" value="1000">
              </div>
            </div>

            <label class="toggle-row">
              <input id="discontinuityToggle" type="checkbox"> Discontinuity
            </label>

            <label class="toggle-row">
              <input id="showFlowLines" type="checkbox"> Show lines
            </label>

            <label class="toggle-row">
              <input id="bgWhite" type="checkbox" checked> Light
            </label>

            <label class="toggle-row">
              <input id="bgBlack" type="checkbox"> Dark
            </label>
          </div>
        </section>

        <div class="section-divider"></div>

        <section class="sidebar-section" id="colors-section">
          <div class="section-title">Colors</div>

          <div class="section-content">
            <div class="setting-control">
              <div class="setting-title">Density</div>
              <div class="slider-wrapper" data-input="ribbonDensity">
                <div class="slider-track"></div>
                <div class="slider-handle" id="ribbonDensity-handle"></div>
                <input id="ribbonDensity" class="slider" type="range" min="0.01" max="1" step="0.01" value="0.12">
              </div>
            </div>

            <div class="setting-control">
              <div class="setting-title">Opacity</div>
              <div class="slider-wrapper" data-input="ribbonOpacity">
                <div class="slider-track"></div>
                <div class="slider-handle" id="ribbonOpacity-handle"></div>
                <input id="ribbonOpacity" class="slider" type="range" min="0" max="100" step="1" value="50">
              </div>
            </div>

            <div class="setting-control">
              <div class="setting-title">Colors</div>
              <div class="color-picker-group">
                <div class="color-preview"><input id="col0" type="color" value="#2b1a8b"></div>
                <div class="color-preview"><input id="col1" type="color" value="#962dff"></div>
                <div class="color-preview"><input id="col2" type="color" value="#f175ff"></div>
              </div>
            </div>
          </div>
        </section>

        <div class="section-divider"></div>

        <section class="sidebar-section" id="pixelsort-section">
          <div class="section-title">Pixel Sort</div>
          <div class="section-content" id="pixel-sort-settings">
            <div class="setting-control">
              <div class="setting-title">Threshold</div>
              <div class="slider-wrapper" data-input="pixelSortThreshold">
                <div class="slider-track"></div>
                <div class="slider-handle" id="pixelSortThreshold-handle"></div>
                <input id="pixelSortThreshold" class="slider" type="range" min="0" max="255" step="1" value="50">
              </div>
            </div>

            <div class="setting-title">
              <span>Direction</span>
              <select id="pixelSortAxis">
                <option value="horizontal">Colonnes (horizontal)</option>
                <option value="vertical">Lignes (vertical)</option>
              </select>
            </div>
          </div>
        </section>

        <div class="section-divider"></div>

        <div class="sidebar-footer">
          <div style="padding: 14px 18px 18px; display: flex; flex-direction: column; gap: 16px;">
            <button id="regenBtn" class="export-btn">Régénérer</button>

            <div class="section-divider"></div>

            <div class="setting-title">
              <span>Format</span>
              <select id="exportFormat">
                <option value="png">PNG</option>
                <option value="svg">SVG</option>
              </select>
            </div>
            <button id="exportBtn" class="export-btn">Export</button>
          </div>
        </div>
      </div>
    </aside>
  </div>

  <script src="sketch.js"></script>
  <script src="controls.js"></script>
</body>

</html>